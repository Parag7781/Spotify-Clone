async function getSongs(folder) {
  currFolder = folder;
  
  // First try to load metadata
  try {
    const metaRes = await fetch(`/songs/${folder}/pcp.json`);
    const metadata = await metaRes.json();
    
    if (metadata.songs) {
      songs = metadata.songs;
    } else {
      // Fallback to file scanning if no metadata
      const a = await fetch(`/songs/${folder}/`);
      const response = await a.text();
      const div = document.createElement("div");
      div.innerHTML = response;
      const as = div.getElementsByTagName("a");
      
      songs = [];
      for (let element of as) {
        if (element.href.endsWith(".mp3") || element.href.endsWith(".m4a")) {
          const url = new URL(element.href);
          const pathname = url.pathname;
          const songname = decodeURIComponent(
            url.pathname.split("/").pop().replace(/\.(mp3|m4a)$/i, "")
          );
          songs.push({
            name: songname,
            artist: "Unknown Artist", // Default value
            path: pathname
          });
        }
      }
    }
    
    // Update the UI
    const songUL = document.querySelector(".songlist ul");
    songUL.innerHTML = songs.map(song => `
      <li>
        <img class="invert" src="img/music.svg" style="width:40px" alt="">  
        <div class="info">
          <div>${song.name}</div>
          <div>${song.artist}</div>
        </div>
        <div class="play-now">
          <span>Play Now</span>
          <img class="invert icon" src="img/playnow.svg" style="width:40px" alt="">
        </div>
      </li>
    `).join("");
    
    // Attach event listeners
    Array.from(songUL.children).forEach((e, index) => {
      e.addEventListener("click", () => {
        currentIndex = index;
        playmusic(songs[index].path);
      });
    });
    
    return songs;
    
  } catch (err) {
    console.error("Error loading songs:", err);
    return [];
  }
}